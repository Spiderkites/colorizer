("function"==typeof define&&define.amd?define:function(e,t){this.eModal="undefined"!=typeof module&&module.exports?t(require(e[0],{}),module.exports):t(window.$)})(["jquery"],function(b,e){var d,t="recycle-bin",i="<div>",c="",u="click",o="hide",f="shown.bs.modal",m="submit",p="eFooter",v=o+".bs.modal",y="input",h="danger",g={OK:"Cancel",True:"False",Yes:"No"},x={},w="modal-body",j=".modal-dialog",k={},C="modal-rec",z={sm:"sm",lg:"lg",xl:"xl"},O="modal-tmp",H={allowContentRecycle:!0,confirmLabel:Object.keys(g)[0],labels:g,loadingHtml:'<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped active" style="width: 100%"></div></div>',size:c,title:"Attention",autofocus:!1};return(e=e||{}).addLabel=function(e,t){g[e]=t},e.ajax=function(a,e){var n=L();"object"==typeof a&&M(a);var r={async:!0,deferred:n,xhrFields:{withCredentials:!1},loading:!0,title:e||H.title,url:a.url||a,dataType:a.dataType||"text"};return a.url&&b.extend(r,a),b.ajax(r).done(function(e){var t;t=e,e=b("<div />").html(t).find("#content").html(),d.find("."+w).html(a.success?a.success(e):e);var o=d.find(".modal-body h1");return 0<o.length&&0<o.text().length&&(d.find(".modal-title").text(o.text()),o.remove()),n.resolve(d)}).fail(function(e,t){var o=a.error?a.error(e,t,r):'<div class="alert alert-danger"><strong>XHR Fail: </strong>URL [ '+r.url+"] load fail.</div>";return d.find("."+w).html(o),n.reject(e)}),R(r,e)},e.alert=R,e.close=B,e.confirm=function(e,t){var o=L();return"object"==typeof e&&M(e),R({async:!0,buttons:[{close:!0,click:a,text:g[e.label]?g[e.label]:g[H.confirmLabel],style:e.style&&e.style[0]||h},{close:!0,click:a,text:g[e.label]?e.label:H.confirmLabel,style:e.style&&e.style[1]}],deferred:o,message:e.message||e,onHide:a,size:e.size,title:e.title||t});function a(e){B();var t=b(e.currentTarget).html();return g[t]?o.resolve():o.reject()}},e.emptyBin=function(){return b("#"+t+" > *").remove()},e.iframe=function(t,e){var o=L();"object"==typeof data&&M(data);var a,n,r,l,s,i,d,c,u,f=t.data?Object.keys(t.data).map(function(e){return e+'="'+t.data[e]+'"'}).join(" "):"",m='<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%</div><iframe class="embed-responsive-item" frameborder=0 src="%0%" %2% style="width:100%;height:75vh;display:block;"/>'.replace("%0%",t.message||t.url||t).replace("%1%",H.loadingHtml).replace("%2%",f),p=(a="3.0.0",n=b.fn.jquery.split("."),r=a.split("."),l=n[0],s=n[1],i=n[2],d=r[0],c=r[1],u=r[2],l<d||d===l&&s<c||d===l&&c===s&&i<u?b(m).load(v):b(m).on("load",v));return R({async:!0,buttons:t.buttons||!1,deferred:o,message:p,size:t.size||z.xl,title:t.title||e});function v(){return b(this).parent().find("div."+O).fadeOut(function(){b(this).remove()}),o.resolve()}},e.prompt=function(e,t){var o=L();"object"==typeof e&&M(e);var a,n={deferred:o};if("object"==typeof e?b.extend(n,e):(n.message=e,n.title=t),n.async=!0,n.buttons)for(var r=0,l=n.buttons.length;r<l;r++)(a=n.buttons[r]).style=(a.style||"default")+" pull-left",a.type=a.type||"button";var s=T([{close:!0,type:"reset",text:g.OK,style:h},{close:!1,type:m,text:H.confirmLabel}].concat(n.buttons||[]));return n.buttons=!1,n.onHide=i,n.message=b('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(n.message||c)+'</label><input type=text class=form-control required autocomplete="on" value="'+(n.value||c)+(n.pattern?'" pattern="'+n.pattern:c)+'"></div></form>').append(s).on(m,i),R(n);function i(e){var t=d.find(y).val();return B(),e.type!==m?o.reject(t):o.resolve(t),!1}},e.setId=function(e){q(!0).find(j).prop("id",e)},e.setEModalOptions=M,e.setModalOptions=function(e){return d&&d.remove(),b.extend(k,e)},e.size=z,e.version="1.2.67",e;function L(){var e,t;try{t=require("Q")}catch(e){t=window.Q}return t?e=t.defer():(e=b.Deferred()).promise=e.promise(),e.promise.element=q(!0).find(j),e}function T(e){if(!1===e)return c;var t=b(i).addClass("modal-footer").prop("id",p);if(e)for(var o=0,a=e.length;o<a;o++){var n=e[o],r=b("<button>").addClass("btn btn-"+(n.style||"primary"));for(var l in n)if(n.hasOwnProperty(l))switch(l){case"close":n[l]&&r.attr("data-dismiss","modal").addClass("x");break;case u:var s=n.click.bind(q(!0).find(".modal-content"));r.click(s);break;case"text":r.html(n[l]);break;default:r.attr(l,n[l])}t.append(r)}else t.append('<button class="x btn btn-primary" data-dismiss=modal type=button>Close</button>');return t}function q(e){return d||(b("#"+t).length||b("body").append(b(i).prop("id",t).hide()),d=b('<div class="modal fade" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class=modal-content> <div class=modal-header><span class=modal-title></span><button type=button class="x close" data-dismiss=modal aria-label="Close"><span aria-hidden="true" class="fas fa-times"></span></button></div></div></div></div>').on("hidden.bs.modal",F).on(u,"button.x",function(e){var t=b(e.currentTarget);if(t.prop("type")!==m)return d.modal(o);try{if(t.closest("form")[0].checkValidity())return B()}catch(e){return B()}return d})),e&&d||H.autofocus&&d.on(f,function(){b(this).find(y).first().focus()}),d}function F(){if(d){var e=d.find("."+C).removeClass(C).appendTo("#"+t);d.off(v).off(f).find(".modal-content > div:not(:first-child)").remove(),H.allowContentRecycle&&!x.clone||e.remove()}}function R(e,t){!function(e,t){if(!e)throw new Error("Invalid parameters!");F(),x=e;var o=q(),a="modal-"+(e.size||H.size);o.find(j).removeClass("modal-sm modal-lg modal-xl").addClass(e.size||H.size?a:null),o.find(".modal-title").html((e.title||t||H.title)+" ").append(b("<small>").html(e.subtitle||c)),o.on(v,e.onHide)}(e,t);var o=e.deferred||L();"object"==typeof e&&M(e);var a,n,r,l,s=b(i).append(((r=(a=e).loading?H.loadingHtml:a.message||a).on||r.onclick?(n=!0===a.clone?b(r).clone():b(r)).addClass(a.useBin&&!a.loading?C:O):n=b(i).attr("style","position:relative;word-wrap:break-word;").addClass(w).html(r),a.css&&a.css!==n.css&&n.css(a.css),n),T(e.buttons));return l=s,d.modal(k).find(".modal-content").append(l),e.async||d.on(f,o.resolve),o.promise}function M(e){return b.extend(H,e)}function B(){return d&&d.off(v).modal(o),d}});